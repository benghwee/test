@Configuration
public class MetricsConfig {
    private static final Logger logger = LoggerFactory.getLogger("metrics");

    @Bean
    public LoggingMeterRegistry loggingMeterRegistry() {
        return LoggingMeterRegistry.builder(LoggingRegistryConfig.DEFAULT)
            .clock(Clock.SYSTEM)
            .loggingSink(line -> {
                // Custom format: [MetricName] Value BaseUnit Tags
                String[] parts = line.split(" ");
                if (parts.length >= 2) {
                    String metricName = parts[0];
                    String value = parts[1];
                    String formattedLine = String.format("[%s] %s %s", 
                        metricName,
                        value,
                        String.join(" ", Arrays.copyOfRange(parts, 2, parts.length)));
                    logger.info(formattedLine);
                } else {
                    logger.info(line);
                }
            })
            .build();
    }
}
